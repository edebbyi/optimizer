services:
  - type: web
    name: optimizer-agent
    env: python
    plan: starter
    region: virginia
    buildCommand: pip install --upgrade pip && pip install -r requirements.txt
    startCommand: uvicorn api:app --host 0.0.0.0 --port $PORT
    disk:
      name: optimizer-data
      mountPath: /opt/render/project/src/model
      sizeGB: 2
    healthCheckPath: /health
    envVars:
      - key: AIRTABLE_API_KEY
        sync: false
      - key: AIRTABLE_BASE_ID
        value: appW8hvRj3lUrqEH2
      - key: AIRTABLE_IMAGES_TABLE
        value: tblwnQTC0Tp8xgTue
      - key: AIRTABLE_STRUCTURES_TABLE
        value: tblPPDf9vlTBv2kyl
      - key: AIRTABLE_IMAGES_VIEW
        value: viwZ4vi03GR4oMXGg
      - key: AIRTABLE_STRUCTURES_VIEW_ACTIVE
        value: viwoC5FLPRgpvkjj6
      - key: AIRTABLE_STRUCTURES_VIEW_ALL
        value: viw0O8ywpWywfjZPt
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-4o
      - key: CLIP_MODEL
        value: clip-ViT-B-32
      - key: TEXT_MODEL
        value: all-MiniLM-L6-v2
